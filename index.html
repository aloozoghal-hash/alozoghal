<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ùˆ Ø°ØºØ§Ù„ | Ø³ÙØ§Ø±Ø´ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#050505">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <link rel="icon" href="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg">

    <style>
        @import url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css');
        :root { --fire: #ff4d00; --gold: #e2b04a; --bg: #050505; --royal: #ffd700; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Vazirmatn', sans-serif; }

        body {
            background: var(--bg); color: #fff; min-height: 100vh; padding: 15px;
            background-image: radial-gradient(circle at 50% 0%, #3a1100 0%, #050505 80%);
            display: flex; flex-direction: column; align-items: center; padding-bottom: 50px;
        }

        /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ù†Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù†ØµØ¨ */
        #pwa-install-banner {
            display: none; position: fixed; bottom: 90px; left: 15px; right: 15px;
            background: rgba(20, 20, 20, 0.95); border: 1px solid var(--gold);
            border-radius: 20px; padding: 12px; z-index: 2000; backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(226, 176, 74, 0.4); animation: slideUp 0.5s ease-out;
        }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .banner-content { display: flex; align-items: center; gap: 12px; }
        .banner-logo { width: 45px; height: 45px; border-radius: 10px; border: 1px solid var(--gold); }
        .banner-text { flex: 1; font-size: 12px; color: #fff; text-align: right; }
        .btn-install-now { background: var(--gold); color: #000; border: none; padding: 8px 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }

        .header-section { text-align: center; margin-bottom: 20px; }
        .main-logo { width: 85px; height: 85px; border-radius: 50%; border: 2px solid var(--gold); object-fit: cover; box-shadow: 0 0 15px rgba(226, 176, 74, 0.4); }
        
        .brand-container { display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 8px; }
        .brand-name { font-size: 26px; font-weight: 900; color: var(--gold); }
        
        .fire-anim { display: inline-block; animation: heatPulse 1.5s infinite alternate; filter: drop-shadow(0 0 2px #ff4d00); font-size: 24px; }
        @keyframes heatPulse {
            0% { transform: scale(1); filter: drop-shadow(0 0 2px #ff4d00) brightness(1); }
            100% { transform: scale(1.15) rotate(-3deg); filter: drop-shadow(0 0 12px #ffae00) brightness(1.3); }
        }

        .sub-brand { 
            font-size: 16px; font-weight: bold; color: var(--royal); margin-top: 5px; 
            animation: blinkGold 1.2s infinite; text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
        }
        
        .challenge-link {
            display: block; margin: 15px 0; padding: 10px; text-decoration: none; color: #fff; background: rgba(255, 215, 0, 0.1);
            border: 1px dashed var(--gold); border-radius: 12px; font-weight: bold; font-size: 14px; animation: blinkChallenge 1.5s infinite; transition: 0.3s;
        }
        @keyframes blinkChallenge {
            0%, 100% { opacity: 1; transform: scale(1); box-shadow: 0 0 5px var(--gold); }
            50% { opacity: 0.7; transform: scale(0.98); box-shadow: 0 0 15px var(--fire); }
        }

        .media-container { width: 100%; max-width: 420px; border-radius: 20px; overflow: hidden; border: 1px solid rgba(226, 176, 74, 0.4); margin-bottom: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); background: #000; }
        
        .video-slider { position: relative; width: 100%; aspect-ratio: 16/9; overflow: hidden; }
        .video-wrapper { display: flex; transition: transform 0.6s ease-in-out; height: 100%; }
        .video-wrapper video { width: 100%; flex-shrink: 0; object-fit: cover; }
        
        .nav-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); border: none; color: #fff; width: 40px; height: 40px; cursor: pointer; border-radius: 50%; z-index: 10; font-size: 20px; display: flex; align-items: center; justify-content: center; }
        .prev-btn { left: 10px; } .next-btn { right: 10px; }
        .mute-toggle { position: absolute; bottom: 10px; left: 10px; z-index: 10; background: var(--gold); border: none; width: 35px; height: 35px; border-radius: 50%; color: #000; cursor: pointer; }

        .image-fader { position: relative; width: 100%; aspect-ratio: 16/9; border-top: 2px solid #222; }
        .image-fader img { position: absolute; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 1s; left: 0; top: 0; }
        .image-fader img.active { opacity: 1; }

        .reviews-container {
            width: 100%; max-width: 420px; background: rgba(226, 176, 74, 0.05);
            border: 1px solid rgba(226, 176, 74, 0.2); border-radius: 20px;
            padding: 15px; margin-bottom: 20px; min-height: 95px; text-align: center;
        }
        #comment-content { transition: opacity 0.6s; font-size: 14px; line-height: 1.6; }
        .c-name { color: var(--gold); font-weight: bold; display: block; margin-bottom: 4px; }

        .order-card { width: 100%; max-width: 420px; background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border-radius: 30px; border: 1px solid rgba(255, 255, 255, 0.1); padding: 25px; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; text-align: right; }
        label { display: block; margin-bottom: 6px; color: #bbb; font-size: 13px; }
        input, textarea, select { width: 100%; padding: 14px; background: rgba(0,0,0,0.5); border: 1px solid #333; border-radius: 12px; color: #fff; text-align: right; font-size: 16px; outline: none; }

        .qty-box { display: flex; align-items: center; justify-content: space-between; background: #000; border-radius: 12px; padding: 5px; border: 1px solid #333; direction: ltr; margin-bottom: 10px; }
        .qty-btn { width: 45px; height: 45px; border-radius: 10px; border: none; background: #1a1a1a; color: var(--gold); font-size: 24px; cursor: pointer; }

        .btn { width: 100%; padding: 16px; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; margin-top: 10px; font-size: 16px; }
        .btn-gold { background: linear-gradient(135deg, var(--gold), #b8860b); color: #000; }
        .btn-gps { background: transparent; color: #fff; border: 1px solid #555; font-size: 13px; }
        .btn-wa { background: #25D366; color: #fff; display: none; text-decoration: none; text-align: center; }
        .btn-action { display: flex; gap: 10px; }
        .btn-edit { background: #444; color: #fff; }
        .btn-reset { background: #8b0000; color: #fff; }

        .star-rating { display: flex; flex-direction: row-reverse; justify-content: center; gap: 5px; margin: 10px 0; }
        .star-rating input { display: none; }
        .star-rating label { font-size: 30px; color: #333; cursor: pointer; }
        .star-rating input:checked ~ label { color: var(--gold); }

        .invoice-card { display: none; background: #1a1a1a; border: 3px double var(--gold); border-radius: 20px; padding: 20px; margin-top: 15px; text-align: center; }
        .invoice-row { display: flex; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px dotted #444; padding-bottom: 4px; font-size: 14px; }
        
        .comments-list { width: 100%; max-width: 420px; margin-top: 20px; }
        .comment-item { background: rgba(255,255,255,0.05); border-radius: 15px; padding: 12px; margin-bottom: 10px; border: 1px solid rgba(226, 176, 74, 0.1); }

        .site-footer {
            width: 100%; max-width: 420px; background: rgba(10, 10, 10, 0.95);
            border: 1px solid rgba(226, 176, 74, 0.3); border-radius: 25px;
            padding: 25px 15px; margin-top: 25px; text-align: center;
        }
        .footer-logo-small { width: 50px; height: 50px; border-radius: 50%; border: 1px solid var(--gold); margin-bottom: 10px; }
        .footer-text { font-size: 13px; color: #bbb; line-height: 1.7; text-align: justify; }
        .footer-info-list { list-style: none; font-size: 13px; color: #ddd; margin-top: 10px; }

        .call-float { position: fixed; bottom: 20px; right: 20px; background: var(--gold); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 28px; z-index: 1000; }
    </style>
</head>
<body>

    <div id="pwa-install-banner">
        <div class="banner-content">
            <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" class="banner-logo">
            <div class="banner-text"><b>Ù†ØµØ¨ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ø§Ù„Ùˆ Ø°ØºØ§Ù„</b><br>Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹ Ùˆ Ø±Ø§Ø­Øª</div>
            <button class="btn-install-now" id="installBtn">Ù†ØµØ¨</button>
        </div>
    </div>

    <div class="header-section">
        <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" class="main-logo">
        <div class="brand-container"><span class="fire-anim">ğŸ”¥</span><div class="brand-name">Ø§Ù„Ùˆ Ø°ØºØ§Ù„</div><span class="fire-anim">ğŸ”¥</span></div>
        <div class="sub-brand">Ø³ÙØ§Ø±Ø´ Ø³Ø±ÛŒØ¹ Ø°ØºØ§Ù„</div>
    </div>

    <div class="media-container">
        <div class="video-slider">
            <button class="mute-toggle" onclick="toggleMute()"><span id="muteIcon">ğŸ”‡</span></button>
            <button class="nav-btn prev-btn" onclick="moveVideoSlide(-1)">â®</button>
            <button class="nav-btn next-btn" onclick="moveVideoSlide(1)">â¯</button>
            <div class="video-wrapper" id="videoWrapper">
                <video muted playsinline loop><source src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/a8c2f66bea9ea321326456dd5d058f26_720w.mp4" type="video/mp4"></video>
                <video muted playsinline loop><source src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/VID_20251227_172500_130.mp4" type="video/mp4"></video>
                <video muted playsinline loop><source src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/VID_20251227_172447_155.mp4" type="video/mp4"></video>
                <video muted playsinline loop><source src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/VID_20251227_172436_806.mp4" type="video/mp4"></video>
                <video muted playsinline loop><source src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/VID_20251227_172430_170.mp4" type="video/mp4"></video>
                <video muted playsinline loop><source src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/VID_20251227_172407_619.mp4" type="video/mp4"></video>
            </div>
        </div>
        <div class="image-fader" id="imgFader">
            <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/fa9760cb699d50f589f54d7ceb504aea.jpg" class="active">
            <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/b0e3ef2df45f5efe02e183abb11f6d2c.jpg">
            <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/ace2a27b61a4197c224de5881042326d.jpg">
            <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/2e3b9282f870ecf847697d6e3ff07a58.jpg">
            <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/122d58031851cec0be5ae6c33c1ae4e7.jpg">
        </div>
    </div>

    <div class="reviews-container"><div id="comment-content">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ø¸Ø±Ø§Øª...</div></div>

    <div class="order-card">
        <div id="form-area">
            <div class="form-group"><label>ğŸ‘¤ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:</label><input type="text" id="custName" placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..."></div>
            <div class="form-group"><label>ğŸ•’ Ø²Ù…Ø§Ù† ØªØ­ÙˆÛŒÙ„:</label>
                <select id="delivTime">
                    <option value="ÙÙˆØ±ÛŒ">ÙÙˆØ±ÛŒ</option>
                    <option value="Û± Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡">Û± Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡</option>
                    <option value="Û² Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡">Û² Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡</option>
                    <option value="Û³ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡">Û³ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡</option>
                    <option value="Û´ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡">Û´ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡</option>
                    <option value="Ûµ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡">Ûµ Ø³Ø§Ø¹Øª Ø¯ÛŒÚ¯Ù‡</option>
                </select>
            </div>
            <div class="form-group"><label>ğŸ  Ø¢Ø¯Ø±Ø³ Ù…Ø­Ù„Ù‡/Ú©ÙˆÚ†Ù‡:</label><textarea id="custAddr" rows="2" placeholder="Ø¢Ø¯Ø±Ø³ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒÚ©"></textarea></div>
            
            <div class="form-group"><label>ğŸ”¢ ØªØ¹Ø¯Ø§Ø¯ Ú©ÛŒØ³Ù‡ Ø°ØºØ§Ù„ (Û¶Ûµ,Û°Û°Û° Øª):</label>
                <div class="qty-box">
                    <button class="qty-btn" onclick="updateQty('zoghal', 1)">+</button>
                    <span id="qty-zoghal" style="font-size: 22px; font-weight: bold;">Û±</span>
                    <button class="qty-btn" onclick="updateQty('zoghal', -1)">-</button>
                </div>
            </div>

            <div class="form-group"><label>ğŸ¥— ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø³ØªÙ‡ Ø³Ø¨Ø²ÛŒ (Û³Ûµ,Û°Û°Û° Øª):</label>
                <div class="qty-box">
                    <button class="qty-btn" onclick="updateQty('sabzi', 1)">+</button>
                    <span id="qty-sabzi" style="font-size: 22px; font-weight: bold;">Û°</span>
                    <button class="qty-btn" onclick="updateQty('sabzi', -1)">-</button>
                </div>
            </div>

            <button class="btn btn-gps" id="gpsBtn" onclick="getLocation()">ğŸ“ Ø«Ø¨Øª Ù„ÙˆÚ©ÛŒØ´Ù† (GPS)</button>
            <button class="btn btn-gold" onclick="generateInvoice()">âœ¨ Ù…Ø´Ø§Ù‡Ø¯Ù‡ ÙØ§Ú©ØªÙˆØ± Ù†Ù‡Ø§ÛŒÛŒ</button>

            <a href="https://aloozoghal-hash.github.io/-Mir-mir-/" class="challenge-link">
                ğŸ’¥Ú†Ø§Ù„Ø´ Ø±Ùˆ Ø¨Ø¨Ø±  Û³ Ú©ÛŒØ³Ù‡ Ø°ØºØ§Ù„ Ø¬Ø§ÛŒØ²Ù‡ Ø¨Ú¯ÛŒØ±ğŸ’¥
            </a>
        </div>

        <div id="invoice" class="invoice-card">
            <h3 style="color:var(--gold); margin-bottom:10px;">ğŸ“‘ Ø³ÙØ§Ø±Ø´ Ù†Ù‡Ø§ÛŒÛŒ</h3>
            <div class="invoice-row"><span>Ø³ÙØ§Ø±Ø´ Ù…Ù†:</span> <b id="inv-name"></b></div>
            <div class="invoice-row" id="row-inv-zoghal"><span>Ø°ØºØ§Ù„:</span> <b id="inv-qty-zoghal"></b> Ú©ÛŒØ³Ù‡</div>
            <div class="invoice-row" id="row-inv-sabzi"><span>Ø³Ø¨Ø²ÛŒ:</span> <b id="inv-qty-sabzi"></b> Ø¨Ø³ØªÙ‡</div>
            <div class="invoice-row"><span>Ø²Ù…Ø§Ù†:</span> <b id="inv-time"></b></div>
            <div class="invoice-row"><span>Ù…Ø¨Ù„Øº Ú©Ù„:</span> <span><b id="inv-price"></b> ØªÙˆÙ…Ø§Ù†</span></div>
            
            <div class="btn-action">
                <button class="btn btn-edit" onclick="editOrder()">Ø§ØµÙ„Ø§Ø­</button>
                <button class="btn btn-reset" onclick="resetForm()">Ø³ÙØ§Ø±Ø´ Ù…Ø¬Ø¯Ø¯</button>
            </div>
        </div>
        <a id="waLink" href="#" class="btn btn-wa">ğŸ“± Ø§Ø±Ø³Ø§Ù„ Ø³ÙØ§Ø±Ø´ Ø¨Ù‡ Ø§Ù„Ùˆ Ø°ØºØ§Ù„  </a>
    </div>

    <div class="order-card" style="margin-top: 20px;">
        <h3 style="text-align:center; color:var(--gold); margin-bottom:15px;">â­ Ø«Ø¨Øª Ù†Ø¸Ø± Ùˆ Ø§Ù…ØªÛŒØ§Ø²</h3>
        <div class="form-group"><input type="text" id="revName" placeholder="Ù†Ø§Ù… Ø´Ù…Ø§"></div>
        <div class="form-group"><textarea id="revText" rows="2" placeholder="ØªØ¬Ø±Ø¨Ù‡ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§..."></textarea></div>
        <div class="star-rating">
            <input type="radio" name="stars" id="s5" value="5" checked><label for="s5">â˜…</label>
            <input type="radio" name="stars" id="s4" value="4"><label for="s4">â˜…</label>
            <input type="radio" name="stars" id="s3" value="3"><label for="s3">â˜…</label>
            <input type="radio" name="stars" id="s2" value="2"><label for="s2">â˜…</label>
            <input type="radio" name="stars" id="s1" value="1"><label for="s1">â˜…</label>
        </div>
        <button id="subBtn" class="btn" style="border:1px solid var(--gold); color:var(--gold); background:transparent;" onclick="saveCommentToSheet()">Ø«Ø¨Øª Ù†Ø¸Ø± Ø¯Ø± Ø³Ø§ÛŒØª</button>
    </div>

    <div class="comments-list" id="all-comments-list">
        <h4 style="text-align: center; color: var(--gold); margin-bottom: 15px;">Ø¢Ø®Ø±ÛŒÙ† Ù†Ø¸Ø±Ø§Øª Ù…Ø´ØªØ±ÛŒØ§Ù†</h4>
        <div id="comments-container"></div>
    </div>

    <footer class="site-footer">
        <img src="https://raw.githubusercontent.com/aloozoghal-hash/alozoghal/main/8f6dcedf3dc3dbaa82c0df548bd962c9.jpg" class="footer-logo-small">
        <div style="color:var(--gold); font-weight:bold; margin-bottom:10px;">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§Ù„Ùˆ Ø°ØºØ§Ù„</div>
        <p class="footer-text">
            Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ø§Ø² Ø¯Ù„ Ø§ÛŒØ°Ù‡ Ø¨Ø±Ø§ÛŒ Ø³ÙØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ØµÙØ§ÛŒ Ø´Ù…Ø§. Ù‡Ø¯Ù Ù…Ø§ Ø³Ø§Ø¯Ù‡ Ø§Ø³Øª: Ø±Ø³Ø§Ù†Ø¯Ù† Ù…Ø±ØºÙˆØ¨â€ŒØªØ±ÛŒÙ† Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ Ø¨Ù‡ Ø¯Ø³Øª Ø´Ù…Ø§ Ù…Ø´ØªØ±ÛŒ Ø¹Ø²ÛŒØ² Ø¯Ø± Ú©Ù…ØªØ±ÛŒÙ† Ø²Ù…Ø§Ù† Ù…Ù…Ú©Ù†. ØªØ§ Ù„Ø°Øª Ú©Ø¨Ø§Ø¨ Ø®ÙˆØ±Ø¯Ù† Ø¨Ø±Ø§ÛŒØªØ§Ù† Ø¯ÙˆÚ†Ù†Ø¯Ø§Ù† Ø´ÙˆØ¯.
        </p>
        <ul class="footer-info-list">
            <li>ğŸ“ Ø¢Ø¯Ø±Ø³: Ø§ÛŒØ°Ù‡ØŒ Ù¾Ø§Ø±Ú© Ù„Ø§Ù„Ù‡</li>
            <li style="direction: ltr; margin-top:5px;">Û°Û¹Û²Û² Û°Û·Û³ Û°Û¶Û²Û¸ ğŸ“</li>
            <li style="margin-top:5px; font-size:11px; color:#666;">ğŸ•’ Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ: Û· ØµØ¨Ø­ ØªØ§ Û¹ Ø´Ø¨</li>
        </ul>
        <div style="font-size: 10px; color: #444; margin-top: 15px; border-top: 1px solid #222; padding-top: 10px;">Â© Û²Û°Û²Ûµ ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ø¨Ø±Ø§ÛŒ Ø§Ù„Ùˆ Ø°ØºØ§Ù„ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.</div>
    </footer>

    <a href="tel:09220730628" class="call-float">ğŸ“</a>

    <script>
        // URL Ø¬Ø¯ÛŒØ¯ Ø´Ù…Ø§
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzt--O2R0kfQt9Ns4kJGVdr-m_N8_M6vMO-43xC5MJ9lC7XML-K5lq7P4rkeVkSZkJn/exec";

        let comments = [
            { n: "Ù…Ø±Ø§Ø¯ÛŒ", t: "Ø°ØºØ§Ù„Ø³ Ø¹Ø§Ù„ÛŒÙ‡ Ø¯Ù…Øª Ú¯Ø±Ù… ÙÙ†Ú¯Ù‡ Ù†Ø¯Ø§Ø´ØªÙ†    ØŒ.", s: 5 },
            { n: "Ù…Ø­Ù…ÙˆØ¯ÛŒ", t: "Ø¯Ù…ØªÙˆÙ† Ú¯Ø±Ù…ØŒ Ø°ØºØ§Ù„â€ŒÙ‡Ø§ Ø¯Ø±Ø´Øª Ùˆ Ø¨Ø¯ÙˆÙ† Ø®Ø§Ú©Ù‡ Ø¨ÙˆØ¯.", s: 5 },
            { n: "Ø§Ø³Ù…Ø§Ø¹ÛŒÙ„â€ŒÙˆÙ†Ø¯ÛŒ", t: "ØªÙˆÛŒ Ø§ÛŒØ°Ù‡ Ù‡ÛŒÚ†â€ŒØ¬Ø§ Ø§ÛŒÙ†Ø¬ÙˆØ±ÛŒ Ø³Ø±ÛŒØ¹ Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ Ù†Ù…ÛŒØ±Ø³ÙˆÙ†Ù‡.", s: 5 },
            { n: "Ø´ÛŒØ®â€ŒØ²Ø§Ø¯Ù‡", t: "Ù…Ø§Ù†Ø¯Ú¯Ø§Ø±ÛŒ Ø­Ø±Ø§Ø±ØªØ´ Ø¨Ø±Ø§ÛŒ Ø¬ÙˆØ¬Ù‡ Ú©Ø¨Ø§Ø¨ Ø­Ø±Ù Ù†Ø¯Ø§Ø´Øª.", s: 5 },
            { n: "ØºØ±ÛŒØ¨ÛŒ", t: "ÛŒÙ‡ Ù¾Ù„Ø§Ø³ØªÛŒÚ© Ø®Ø±ÛŒØ¯Ù… Û²ÙˆÙ„Ø§ Ú©ÙˆØ§Ø¨ Ú©Ø±Ø¯Ù… Ø¯Ù…Øª Ú¯Ø±Ù….", s: 5 },
            { n: "ØµØ§Ø¯Ù‚ÛŒ", t: "Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ Ù„Ø±ÛŒ  ØŒ Ø¨ÙˆÛŒ Ø®ÛŒÙ„ÛŒ Ø®ÙˆØ¨ÛŒ Ø¨Ù‡ Ú©Ø¨Ø§Ø¨ Ø¯Ø§Ø¯.", s: 5 },
            { n: "Ú©Ø§ÙˆØ³ÛŒ", t: "Ø¨Ø¯ÙˆÙ† ÙÙ†Ú¯Ù‡ Ø¨ÛŒ .", s: 5 },
            { n: "Ù†Ø¸Ø±ÛŒ", t: "Ù¾ÛŒÚ©â€ŒØªÙˆÙ† Ø®ÛŒÙ„ÛŒ Ø²ÙˆØ¯ Ø±Ø³ÛŒØ¯ØŒ Ø¯Ù…ØªÙˆÙ† Ú¯Ø±Ù….", s: 5 },
            { n: "Ú©ÛŒØ§Ù†ÛŒ", t: "Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ Ø¨Ø§ Ø§ÛŒÙ† Ù‚ÛŒÙ…Øª Ùˆ Ú©ÛŒÙÛŒØª ØªÙˆÛŒ Ø¨Ø§Ø²Ø§Ø± Ù¾ÛŒØ¯Ø§ Ù†Ù…ÛŒØ´Ù‡.", s: 5 },
            { n: "Ø³Ø¹ÛŒØ¯ÛŒ", t: "Ø®ÛŒÙ„ÛŒ Ø±Ø§Ø­Øª Ø±ÙˆØ´Ù† Ø´Ø¯ØŒ Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ø¨Ø§Ø¯ Ø²Ø¯Ù† Ø²ÛŒØ§Ø¯ Ù†Ø¯Ø§Ø´Øª.", s: 5 },
            { n: "Ø¨Ø®ØªÙŠØ§Ø±ÛŒ", t: "Ø¨Ù‡ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ø°ØºØ§Ù„ Ø§ÛŒØ°Ù‡.", s: 5 },
            { n: "Ù…Ù†Ø¬Ø²ÛŒ", t: "Ø¨Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ØªÙ…ÛŒØ² Ùˆ Ø°ØºØ§Ù„â€ŒÙ‡Ø§ÛŒ ÛŒÚ©Ø¯Ø³Øª.", s: 5 },
            { n: "Ø³Ø±Ø§Ú©ÛŒ", t: "Ø­Ø±Ø§Ø±ØªØ´ Ø®ÛŒÙ„ÛŒ ÛŒÚ©Ù†ÙˆØ§Ø®Øª Ø¨ÙˆØ¯.", s: 5 },
            { n: "Ø­Ø§Ø¬ÛŒâ€ŒÙˆÙ†Ø¯", t: " Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯.", s: 5 },
            { n: "Ø¬Ù…Ø´ÛŒØ¯ÛŒ", t: "Ù‡ÛŒÚ† Ø®Ø§Ú©Ù‡ Ù†Ø¯Ø§Ø´Øª Ø®ÛŒÙ„ÛŒ Ú©Ù…ğŸ‘.", s: 5 },
            { n: "Ø®Ø³Ø±ÙˆÛŒ", t: "Ø§Ø² Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ Ø³Ø±ÛŒØ¹â€ŒØªÙˆÙ† Ù…Ù…Ù†ÙˆÙ†Ù….", s: 5 },
            { n: "Ø¯Ø§ÙˆØ¯ÛŒ", t: "Ø°ØºØ§Ù„â€ŒÙ‡Ø§ØŒ Ø³Ø±ÛŒØ¹ Ø±ÙˆØ´Ù† Ø´Ø¯Ù†.", s: 5 },
            { n: "Ø±Ø­ÛŒÙ…ÛŒ", t: "Ø¨Ù‡ Ú©Ù„ ÙØ§Ù…ÛŒÙ„ Ù…Ø¹Ø±ÙÛŒâ€ŒØªÙˆÙ† Ú©Ø±Ø¯Ù….", s: 5 },
            { n: "Ø§Ø³Ø¯ÛŒ", t: "Ø°ØºØ§Ù„ Ú©Ø¨Ø§Ø¨ Ø§ØµÙ„ Ø§ÛŒØ°Ù‡ØŒ Ø¯Ù…ØªÙˆÙ† Ú¯Ø±Ù….", s: 5 },
            { n: "Ù†ÙˆØ±ÙˆØ²ÛŒ", t: "Ø§Ø±Ø³Ø§Ù„â€ŒØªÙˆÙ† Ø®ÛŒÙ„ÛŒ Ø³Ø±ÛŒØ¹ Ùˆ Ø¹Ø§Ù„ÛŒÙ‡.", s: 5 }
        ];

        // Ù†Ù…Ø§ÛŒØ´ ØªÙ…Ø§Ù… Ù†Ø¸Ø±Ø§Øª Ø¯Ø± Ù„ÛŒØ³Øª Ù¾Ø§ÛŒÛŒÙ†
        function displayAllComments() {
            const container = document.getElementById('comments-container');
            container.innerHTML = ""; 
            [...comments].reverse().forEach(c => {
                container.innerHTML += `
                    <div class="comment-item">
                        <span class="c-name">${c.n}:</span>
                        <div style="font-size:13px; margin:5px 0;">${c.t}</div>
                        <div style="color:var(--gold); font-size:10px;">${"â˜…".repeat(c.s || 5)}</div>
                    </div>
                `;
            });
        }

        async function fetchNewComments() {
            try {
                const response = await fetch(SCRIPT_URL);
                const data = await response.json();
                if (data && data.length > 0) {
                    comments = [...comments, ...data];
                }
            } catch (e) { console.log("Load failed"); }
            displayAllComments();
            startCycle();
        }

        async function saveCommentToSheet() {
            const n = document.getElementById('revName').value, t = document.getElementById('revText').value;
            const s = document.querySelector('input[name="stars"]:checked').value;
            if(!n || !t) return alert("Ù†Ø§Ù… Ùˆ Ù…ØªÙ† Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");
            document.getElementById('subBtn').innerText = "Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øª...";
            try {
                // Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ú¯ÙˆÚ¯Ù„ (Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² fetch Ø¨Ø§ Ø­Ø§Ù„Øª no-cors Ø¨Ø±Ø§ÛŒ Ú¯ÙˆÚ¯Ù„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª)
                await fetch(SCRIPT_URL, { 
                    method: 'POST', 
                    body: JSON.stringify({n, t, s: parseInt(s)}),
                    mode: 'no-cors' 
                });
                alert("Ù†Ø¸Ø± Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯ Ùˆ Ù¾Ø³ Ø§Ø² ØªØ§ÛŒÛŒØ¯ Ù…Ø¯ÛŒØ± Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯."); 
                location.reload();
            } catch (e) { alert("Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„"); document.getElementById('subBtn').innerText = "Ø«Ø¨Øª Ù†Ø¸Ø±"; }
        }

        let cIdx = 0; 
        function startCycle() {
            const d = document.getElementById('comment-content');
            if(comments.length === 0) return;
            setInterval(() => {
                d.style.opacity = 0;
                setTimeout(() => {
                    const c = comments[cIdx % comments.length];
                    d.innerHTML = `<span class="c-name">${c.n}:</span>${c.t}<br>${"â­".repeat(c.s || 5)}`;
                    d.style.opacity = 1; cIdx++;
                }, 600);
            }, 5000);
        }

        // ØªÙˆØ§Ø¨Ø¹ Ø§Ø³Ù„Ø§ÛŒØ¯Ø± Ùˆ ÙˆÛŒØ¯ÛŒÙˆ (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±)
        let iIdx = 0; const imgs = document.querySelectorAll('#imgFader img');
        setInterval(() => { if(imgs.length) { imgs[iIdx].classList.remove('active'); iIdx = (iIdx + 1) % imgs.length; imgs[iIdx].classList.add('active'); } }, 3000);

        const videoWrapper = document.getElementById('videoWrapper');
        const vids = document.querySelectorAll('#videoWrapper video');
        let currentVidIdx = 0; let isMuted = true;

        function moveVideoSlide(direction) {
            vids[currentVidIdx].pause();
            currentVidIdx = (currentVidIdx + direction + vids.length) % vids.length;
            videoWrapper.style.transform = `translateX(${currentVidIdx * 100}%)`;
            playCurrentVideo();
        }

        function playCurrentVideo() {
            const activeVid = vids[currentVidIdx];
            activeVid.muted = isMuted;
            activeVid.play().catch(e => console.log("Auto-play blocked"));
        }

        function toggleMute() {
            isMuted = !isMuted;
            vids[currentVidIdx].muted = isMuted;
            document.getElementById('muteIcon').innerText = isMuted ? "ğŸ”‡" : "ğŸ”Š";
        }

        let zCount = 1; let sCount = 0; let locL = "";
        function updateQty(type, v) {
            if(type === 'zoghal') { if(zCount + v >= 1) { zCount += v; document.getElementById('qty-zoghal').innerText = zCount; } }
            else { if(sCount + v >= 0) { sCount += v; document.getElementById('qty-sabzi').innerText = sCount; } }
        }

        function getLocation() {
            if(navigator.geolocation) {
                document.getElementById('gpsBtn').innerText="Ø¯Ø± Ø­Ø§Ù„ Ø«Ø¨Øª...";
                navigator.geolocation.getCurrentPosition(p => {
                    locL = `https://www.google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
                    document.getElementById('gpsBtn').innerText="âœ… Ù„ÙˆÚ©ÛŒØ´Ù† Ø«Ø¨Øª Ø´Ø¯";
                });
            }
        }

        function generateInvoice() {
            const name = document.getElementById('custName').value; const addr = document.getElementById('custAddr').value;
            const time = document.getElementById('delivTime').value;
            if(!name || !addr) return alert("Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ø¢Ø¯Ø±Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯");
            const total = (zCount * 65000) + (sCount * 35000);
            document.getElementById('inv-name').innerText = name;
            document.getElementById('inv-qty-zoghal').innerText = zCount;
            document.getElementById('inv-qty-sabzi').innerText = sCount;
            document.getElementById('inv-time').innerText = time;
            document.getElementById('inv-price').innerText = total.toLocaleString();
            document.getElementById('row-inv-sabzi').style.display = sCount > 0 ? 'flex' : 'none';
            document.getElementById('form-area').style.display='none';
            document.getElementById('invoice').style.display='block';
            document.getElementById('waLink').style.display='block';
            let orderText = `ğŸ“¦ Ø°ØºØ§Ù„: ${zCount} Ú©ÛŒØ³Ù‡\n`;
            if(sCount > 0) orderText += `ğŸ¥— Ø³Ø¨Ø²ÛŒ: ${sCount} Ø¨Ø³ØªÙ‡\n`;
            const msg = `Ø³Ù„Ø§Ù… Ø§Ù„Ùˆ Ø°ØºØ§Ù„ğŸ–ï¸\nğŸ‘¤ Ù†Ø§Ù…: ${name}\n${orderText}ğŸ•’ ØªØ­ÙˆÛŒÙ„: ${time}\nğŸ  Ø¢Ø¯Ø±Ø³: ${addr}\nğŸ’° Ù…Ø¨Ù„Øº: ${total.toLocaleString()} ØªÙˆÙ…Ø§Ù†\nğŸ“ Ù„ÙˆÚ©ÛŒØ´Ù†: ${locL || "Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡"}\n\nğŸ’¥Ù„Ø·ÙØ§ Ù‡Ù…Ø§Ù‡Ù†Ú¯ Ú©Ù†ÛŒØ¯ Ø°ØºØ§Ù„ Ø¨Ù‡ Ù…ÙˆÙ‚Ø¹ Ø¨Ø¯Ø³ØªÙ… Ø¨Ø±Ø³Ù‡ Ù…Ù…Ù†ÙˆÙ†Ù…ğŸ’¥`;
            document.getElementById('waLink').href = `https://wa.me/989220730628?text=${encodeURIComponent(msg)}`;
        }

        function editOrder() {
            document.getElementById('form-area').style.display='block';
            document.getElementById('invoice').style.display='none';
            document.getElementById('waLink').style.display='none';
        }

        function resetForm() {
            location.reload();
        }

        window.onload = () => {
            playCurrentVideo();
            fetchNewComments();
        };

        // PWA logic
        let deferredPrompt;
        const installBanner = document.getElementById('pwa-install-banner');
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault(); deferredPrompt = e;
            installBanner.style.display = 'block';
        });
        document.getElementById('installBtn').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt = null;
                installBanner.style.display = 'none';
            }
        });
    </script>
</body>
</html>
